{{extend 'layout.html'}}
{{block header}}
<script src="{{=URL('static', 'js/vue.js')}}"></script>
<script>
    var getHaircutsUrl = "{{=URL('api', 'get_all_haircuts')}}";
    var getAppointmentsUrl = "{{=URL('api', 'get_appointments')}}";
    var moveBarbersUrl = "{{=URL('api', 'move_barbers')}}";
    var getBarbersUrl = "{{=URL('api', 'get_barbers')}}"
</script>
{{end}}

<div id="app">
    <div v-if="home_page">
        <div class="container padded center">
            <h1>Welcome to J&R Barber Shop</h1>
            <img src="{{=URL('static', '138.jpg')}}" style="width: 500px; height: 500px"/>
            <br>
            <button>Haircuts</button>
            <button v-on:click="redirect_barber_page()">Barbers</button>
            <button v-on:click="redirect_appointment_page()">Appointments</button>
        </div>

    </div>
    <div v-if="barber_page">
        <div class="container padded center">
            <h1>Our Barbers</h1>
            <div class="quarter">
                <img src="{{=URL('static', 'image.jpeg')}}" style="width: 100px; height: 100px"/>
                <p>hello</p>
            </div>
            <div class="quarter">
                <img src="{{=URL('static', 'image.jpeg')}}" style="width: 100px; height: 100px"/>
                <p>hi</p>
            </div>
            <button v-on:click="redirect_home_page()">Home</button>
            <button>Haircuts</button>
            <button>Appointments</button>
        </div>
    </div>
    <div v-if="haircut_page">
        <img src="{{=URL('static', 'haircut_pictures/haircut1.png')}}"/>
    </div>

    <div v-if="appointment_page">
        <input type="date" v-model="selected_date">

        <select v-model="selected_barber">
            <option disabled value="">Select a barber</option>
            {{barbers = db().select(db.auth_user.ALL)}}
            {{for b in barbers:}}
                {{if b.Barber == True:}}
                    <option v-on:click="test_print()" v-on:change="get_appointments()" value="{{=b.id}}">{{=b.first_name + " " + b.last_name}}</option>
                {{pass}}
            {{pass}}
        </select>

        <select v-model="selected_time">
            <option disabled value="">Select a time</option>
            <option v-for="time in valid_times" value="${time.id}">${time.timeslot}</option>
        </select>



        <button v-on:click="get_appointments()">save</button>



        <div class="table-title">
            <h3>Appointments</h3>
        </div>
        <table class="table-fill">
            <thead>
            <tr>
                <th class="text-left">Time</th>
                <th class="text-left">Customer</th>
            </tr>
            </thead>
            <tbody class="table-hover">
            <tr>
                <td class="text-left">January</td>
                <td class="text-left">$ 50,000.00</td>
            </tr>
            <tr>
                {{appointments = db().select(db.appointments.ALL)}}
                {{for appt in appointments:}}

                    {{customer = db(db.auth_user.id == appt.user_id).select().first()}}
                    {{time = db(db.timeslots.id == appt.timeslot_id).select().first()}}

                    <td class="text-left">{{=time.timeslot}}</td>
                    <td class="text-left">{{=customer.first_name}}</td>
                {{pass}}
            </tr>
            </tbody>
        </table>
    </div>


    <script src="{{=URL('static', 'js/default_index.js')}}"></script>
</div>

<!--
    Dropdown menus
    <select>
        <option>First option</option>
    </select>


    <select>
        <option v-for="time in vueObject>time.timeslot></option>
    </select>

-->
